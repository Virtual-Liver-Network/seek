<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>INSTALL - SEEK Technical Guide</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body class="file">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../doc/ADMINISTRATION.html">ADMINISTRATION</a>
  
    <li class="file"><a href="../doc/BACKUPS.html">BACKUPS</a>
  
    <li class="file"><a href="../doc/CONTACTING_US.html">CONTACTING_US</a>
  
    <li class="file"><a href="../doc/CONTRIBUTING_TO_SEEK.html">CONTRIBUTING_TO_SEEK</a>
  
    <li class="file"><a href="../doc/CREDITS.html">CREDITS</a>
  
    <li class="file"><a href="../doc/EARLIER-UPGRADES.html">EARLIER-UPGRADES</a>
  
    <li class="file"><a href="../doc/INSTALL.html">INSTALL</a>
  
    <li class="file"><a href="../doc/INSTALL-ON-A-SUBURI.html">INSTALL-ON-A-SUBURI</a>
  
    <li class="file"><a href="../doc/INSTALL-PRODUCTION.html">INSTALL-PRODUCTION</a>
  
    <li class="file"><a href="../doc/OTHER-DISTRIBUTIONS.html">OTHER-DISTRIBUTIONS</a>
  
    <li class="file"><a href="../doc/README.html">README</a>
  
    <li class="file"><a href="../doc/SETTING-UP-VIRTUOSO.html">SETTING-UP-VIRTUOSO</a>
  
    <li class="file"><a href="../doc/UPGRADING.html">UPGRADING</a>
  
    <li class="file"><a href="../doc/UPGRADING-TO-0-18.html">UPGRADING-TO-0-18</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Seek.html">Seek</a>
  
    <li><a href="../Seek/Rdf.html">Seek::Rdf</a>
  
    <li><a href="../Seek/Rdf/RdfFileStorage.html">Seek::Rdf::RdfFileStorage</a>
  
    <li><a href="../Seek/Rdf/RdfGeneration.html">Seek::Rdf::RdfGeneration</a>
  
    <li><a href="../Seek/Rdf/RdfRepository.html">Seek::Rdf::RdfRepository</a>
  
    <li><a href="../Seek/Rdf/RdfRepositoryStorage.html">Seek::Rdf::RdfRepositoryStorage</a>
  
    <li><a href="../Seek/Rdf/VirtuosoRepository.html">Seek::Rdf::VirtuosoRepository</a>
  
    <li><a href="../Seek/Rdf/VirtuosoRepository/Config.html">Seek::Rdf::VirtuosoRepository::Config</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation" class="description">
  
<h1 id="label-Installing+SEEK">Installing SEEK</h1>

<h2 id="label-Introduction">Introduction</h2>

<p>If you have installed SEEK, please take a moment to fill out our very
short,optional <a href="http://www.sysmo-db.org/seek-registration">SEEK
Registration Form</a></p>

<p>If you have any problems or questions, you should contact us. The following
link will give you details on how to <a href="CONTACTING_US.html">Contact
Us</a></p>

<p>SEEK is based upon the Ruby on Rails platform. Although the information on
this page should provide you with everything you need to get a basic
installation of SEEK up and running, some background reading on Ruby on
Rails would be beneficial if it is new to you. Documentation and resources
describing Ruby on Rails can be found at <a
href="http://rubyonrails.org/documentation">rubyonrails.org/documentation</a>
.</p>

<p>SEEK is based on the 3.2 version of Rails, and requires Ruby 2.1.</p>

<p>We recommend that you run SEEK on a Linux system. This guide is based on an
Ubuntu (12.04 LTS) system. However, running on other Linux distributions
the main difference is the name of the required packages that have to be
installed for that distribution, other than that the steps will be the
same. If you want to install on different distribution or version please
visit <a href="OTHER-DISTRIBUTIONS.html">Other Distributions</a> and see if
it is listed there.</p>

<p>You will need to have <em>sudo</em> access on the machine you are
installing SEEK, or be able to login as root. You will also need an active
internet connection throughout the installation process.</p>

<p>Although possible, installing and running Ruby on Rails on a Windows system
is troublesome and is not covered here.</p>

<h2 id="label-Installing+packages">Installing packages</h2>

<p>These are the packages required to run SEEK with Ubuntu 12.04 (Desktop or
Server). For other distributions or versions please visit our <a
href="OTHER-DISTRIBUTIONS.html">Other Distributions</a> notes.</p>

<p>You should run an update first</p>

<pre>sudo apt-get update
sudo apt-get upgrade</pre>

<p>Now install the packages:</p>

<pre>sudo apt-get install mysql-server</pre>

<p>Pay attention to what you use for the &#39;MySQL root&#39; password when
requested - you will need this later.</p>

<p>The remaining packages are:</p>

<pre>sudo apt-get install wget curl mercurial ruby libssl-dev build-essential openssh-server git libreadline-dev
sudo apt-get install libxml++2.6-dev openjdk-7-jdk libsqlite3-dev sqlite3
sudo apt-get install poppler-utils libreoffice libmysqlclient-dev libmagick++-dev libxslt1-dev</pre>

<p>Installing these packages now will make installing Ruby 1.9.3 easier later
on:</p>

<pre>sudo apt-get install libtool gawk libyaml-dev autoconf libgdbm-dev libncurses5-dev automake bison libffi-dev</pre>

<h2 id="label-Development+or+Production%3F">Development or Production?</h2>

<p>The following steps are suitable for either setting up SEEK for
development, or in a production environment. However, when setting up a
production environment there are some minor differences - please visit <a
href="INSTALL-PRODUCTION.html">Installing SEEK for Production</a></p>

<h2 id="label-Setting+up+Ruby+and+RubyGems+with+RVM">Setting up Ruby and RubyGems with RVM</h2>

<p>We strongly encourage that you use <a href="https://rvm.io/">RVM</a> for
managing your Ruby and RubyGems version. Although you can use the version
that comes with your linux distribution, it is more difficult to control
the version you use and keep up to date.</p>

<p>To install RVM follow the steps at <a
href="https://rvm.io/rvm/install">rvm.io/rvm/install</a> . The current
basic installation method is to run:</p>

<pre>\curl -L https://get.rvm.io | bash</pre>

<p>to save restarting your shell run:</p>

<pre>source ~/.rvm/scripts/rvm</pre>

<p>if you already had RVM installed, bring it up to date with:</p>

<pre>rvm get stable</pre>

<p>now install Ruby 2.1.3</p>

<pre>rvm install ruby-2.1.3</pre>

<p>you may be asked for your password so that some additional packages can be
installed. You will then need to wait for Ruby to be downloaded and
compiled.</p>

<p>Now you just need to create the <em>Gemset</em> for SEEK. RVM allows what
it calls <em>Gemsets</em> to seperate the gems installed, in isolation from
each other, for different applications. To create the gemset run:</p>

<pre>rvm gemset create seek</pre>

<h2 id="label-Getting+SEEK">Getting SEEK</h2>

<p>Now you are ready for installing SEEK. To fetch the latest version of SEEK
<em>(v0.21.0)</em> change to the directory you want to install it and then
run:</p>

<pre>git clone https://github.com/seek4science/seek.git
cd seek/
git checkout tags/v0.21.0</pre>

<p>Now to install the ruby gems SEEK needs:</p>

<pre>gem install bundler
bundle install</pre>

<h2 id="label-Setting+up+the+Database">Setting up the Database</h2>

<p>You first need to setup the database configuration file. You need to copy a
default version of this and then edit it:</p>

<pre>cp config/database.default.yml config/database.yml
nano config/database.yml</pre>

<p><strong>IMPORTANT:</strong> you should at least change the default username
and password. Change this for each environment
(development,production,test).</p>

<p>Now you need to grant permissions for the user and password you just used
(changing the example below appropriately). You will need the root password
you created for mySQL when installing the package. e.g:</p>

<pre>&gt; mysql -uroot -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1522
Server version: 5.5.32-0ubuntu0.12.04.1 (Ubuntu)

Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.

mysql&gt; CREATE USER &#39;mysqluser&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;mysqlpassword&#39;;
mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &#39;mysqluser&#39;@&#39;localhost&#39; WITH GRANT OPTION;</pre>

<p>Now to create the database for SEEK and seed it with the default data, run:</p>

<pre>bundle exec rake db:setup</pre>

<p>You can now start SEEK for the first time, just to test things are working</p>

<pre>bundle exec rails server</pre>

<p>â€¦ and visit <a href="http://localhost:3000">localhost:3000</a> and a SEEK
page should load.</p>

<p>However, before continuing, stop SEEK with CTRL+C and start up some
services.</p>

<h2 id="label-Starting+the+SEEK+services">Starting the SEEK services</h2>

<p>This describes a quick way to start up the services SEEK needs. If setting
up a production server, following these steps is fine to check things are
working. However, you should also read the <a
href="INSTALL-PRODUCTION.html">Installation for Production</a> guide for
automating these services.</p>

<h3 id="label-Starting+and+Stopping+the+Search+Service">Starting and Stopping the Search Service</h3>

<p>For a new installation, by default search is disabled. Before running the
service you may need to enable search in the Administration setting. The
SEEK server needs restarting whenever search is enabled or disabled.</p>

<p><strong>If search is enabled and the following service is not running, you
will get errors when adding or updating information in SEEK.</strong></p>

<p>SEEK search is based upon the <a
href="http://lucene.apache.org/solr/">Apache Lucene Solr</a> service. To
start this service run:</p>

<pre>bundle exec rake sunspot:solr:start</pre>

<p>and to stop run:</p>

<pre>bundle exec rake sunspot:solr:stop</pre>

<p>Optionally, there is also a configuration file in config/sunspot.yml for
configuring the port that Solr runs on - which is important if running
multiple SEEK installations on the same machine.</p>

<p>The following task can also be at any time if there is need to force all
content to be reindexed (such as after a period of running SEEK with search
turned off).</p>

<pre>bundle exec rake seek:reindex_all</pre>

<h3 id="label-Starting+and+Stopping+the+Background+Service">Starting and Stopping the Background Service</h3>

<p>SEEK uses <a href="https://github.com/collectiveidea/delayed_job">Delayed
Job</a> to process various jobs. It is important this service is running.</p>

<p>To start delayed job run:</p>

<pre>bundle exec rake seek:workers:start</pre>

<p>and to stop run:</p>

<pre>bundle exec rake seek:workers:stop</pre>

<p>you can also restart with</p>

<pre>bundle exec rake seek:workers:restart</pre>

<h3 id="label-Starting+and+Stopping+the+SOFFICE+service">Starting and Stopping the SOFFICE service</h3>

<p>SEEK uses the soffice service provided by <a
href="https://www.libreoffice.org/">LibreOffice</a> to convert various
document formats to PDF and Text - to allow them to be viewed in a web
browser, and to make them indexable to the search. To start soffice run:</p>

<pre>soffice --headless --accept=&quot;socket,host=127.0.0.1,port=8100;urp;&quot; --nofirststartwizard &gt; /dev/null 2&gt;&amp;1 &amp;</pre>

<p>and to stop it run:</p>

<pre>killall -15 soffice</pre>

<h2 id="label-Starting+SEEK">Starting SEEK</h2>

<p>You can now start up SEEK again running:</p>

<pre>bundle exec rails server</pre>

<h2 id="label-Creating+an+Administrator">Creating an Administrator</h2>

<p>When you first visit SEEK at <a
href="http://localhost3000">localhost3000</a> with no users present, you
will be prompted to create a new user. This user will be the administrator
of SEEK (you can change to or add other users in the future). Create a
username and password, and then fill out your profile, and you will be
ready to use SEEK.</p>

<p>You will be prompted to fill out our very short Registration form.
<strong>Please do if you haven&#39;t done so already</strong>, as this
greatly assists the future support and funding of SEEK.</p>

<h2 id="label-Final+steps">Final steps</h2>

<p>If you are setting up SEEK for production use, please now return to our <a
href="INSTALL-PRODUCTION.html">Installing SEEK for Production Guide</a>.</p>

<p>You should also now read our <a href="ADMINISTRATION.html">Administration
Guide</a> for details of some basic tasks and settings.</p>

</div>



<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.2.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

